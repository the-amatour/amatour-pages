<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>League Calendar</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">
  <div id="header" class="mb-6"></div>

  <main class="max-w-4xl mx-auto p-4">
    <div class="flex items-center justify-between mb-3">
      <h1 class="text-xl font-semibold">League Calendar</h1>
      <!-- "Add Tee Time" button - opens Google Calendar event editor in a new tab -->
      <a
        href="https://calendar.google.com/calendar/u/0/r/eventedit?text=Tee+Time&details=Booked+via+Amatour&ctz=America/Los_Angeles"
        target="_blank"
        rel="noopener noreferrer"
        class="inline-flex items-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400"
        aria-label="Add a new tee time"
      >
        + Add Tee Time
      </a>
    </div>

    <!-- Responsive wrapper for the embedded Google Calendar -->
    <div class="bg-white rounded shadow overflow-hidden">
      <!-- aspect-ratio via padding-top hack (16:9 = 56.25%) so iframe scales responsively -->
      <div class="relative" style="padding-top:56.25%; height:0; overflow:hidden;">
        <iframe
          src="https://calendar.google.com/calendar/embed?height=450&wkst=1&ctz=America%2FLos_Angeles&showPrint=0&showTz=0&showTitle=0&src=aW5mby50aGVhbWF0ZXVyc3RvdXJAZ21haWwuY29t&color=%23039be5"
          style="position:absolute; top:0; left:0; width:100%; height:100%; border:0;"
          frameborder="0"
          scrolling="no"
          aria-label="League Calendar"
        ></iframe>
      </div>
    </div>
  </main>

  <div id="footer"></div>

  <script>
    async function loadPartial(id, file) {
        const res = await fetch(file);
        const html = await res.text();
        document.getElementById(id).innerHTML = html;

        if (id === "header") {
          const toggleButton = document.getElementById("menu-toggle");
          const menu = document.getElementById("mobile-menu");

          toggleButton?.addEventListener("click", (e) => {
            e.stopPropagation();
            menu?.classList.toggle("hidden");
          });

          document.addEventListener("click", (e) => {
            if (!menu?.contains(e.target) && !toggleButton?.contains(e.target)) {
              menu?.classList.add("hidden");
            }
          });
        }
      }

      loadPartial("header", "./shared/header.html");
      loadPartial("footer", "./shared/footer.html");
  </script>
</body>
</html>
